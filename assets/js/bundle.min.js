!function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Prefetch=t()}(this,function(){function e(){function e(e){var t=e.indexOf("#");return t<0?e:e.substr(0,t)}function t(e){for(;e&&"A"!=e.nodeName;)e=e.parentNode;return e}function n(e){do{if(!e.hasAttribute)break;if(e.hasAttribute("data-no-prefetch"))return!0}while(e=e.parentNode);return!1}function r(t){return t.href.indexOf("#")>-1&&e(t.href)===e(location.href)}function o(e){for(var t=0;t<m.$exclusions.length;++t)if(e.href.indexOf(m.$exclusions[t])>-1)return!0;return!1}function c(e){return!(e.hasAttribute("download")||!e.href||n(e)||r(e)||o(e))}function a(e){var t=document.createElement("link");return t.setAttribute("rel","prefetch"),t.setAttribute("href",e),t}function i(e){var t=a(e);document.getElementsByTagName("head")[0].appendChild(t)}function f(e){if(e&&e.href){var t="object"==typeof e?e.href:e;m.$callback?m.$callback(t,e,i):i(t),"object"==typeof e&&e.setAttribute("data-no-prefetch","")}}function u(e){m.$lastTouchTimestamp=(new Date).getTime();var n=t(e.target);n&&c(n)&&f(n)}function s(e){if(!(m.$lastTouchTimestamp>(new Date).getTime()-500)){var n=t(e.target);n&&c(n)&&f(n)}}function h(e){if(!(m.$lastTouchTimestamp>(new Date).getTime()-500)){var n=t(e.target);n&&c(n)&&(n.addEventListener("mouseout",l),m.$delayBeforePrefetch?(m.$anchorToPrefetch=n,m.$prefetchTimer=setTimeout(m.prefetch,m.$delayBeforePrefetch)):f(n))}}function l(){m.$prefetchTimer&&(clearTimeout(m.$prefetchTimer),m.$prefetchTimer=!1)}function d(e,n){e.addEventListener(n,function(e){if(e.target.matches("a")||t(e.target))switch(n){case"touchstart":u(e);break;case"mousedown":s(e);break;case"mouseover":h(e)}})}var m=this;m.init=function(e){return e=e||{},m.$prefetchOnMousedown=e.waitForMousedown||!1,m.$enableTouch=e.enableTouch||!1,m.$delayBeforePrefetch=e.hoverDelay||50,m.$exclusions=e.exclusions||[],m.$callback=e.callback,e.containers=e.containers||[],m.addContainers(e.containers),m},m.prefetch=function(e){if(e=e||m.$anchorToPrefetch,m.$prefetchTimer&&(clearTimeout(m.$prefetchTimer),m.$prefetchTimer=!1),"[object Array]"===Object.prototype.toString.call(e))for(var t=0;t<e.length;++t)f(e[t]);else f(e)},m.addContainers=function(e){for(var t=0;t<e.length;++t){var n=document.querySelector(e[t]);n&&(m.$enableTouch&&d(n,"touchstart"),m.$prefetchOnMousedown?d(n,"mousedown"):d(n,"mouseover"))}},m.addExclusions=function(e){m.$exclusions=m.$exclusions.concat(e)}}return(new e).init()}),Prefetch.init({containers:["html"],hoverDelay:100,enableTouch:!0,waitForMousedown:!1});